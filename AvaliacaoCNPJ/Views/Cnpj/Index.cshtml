
@{
    ViewData["Title"] = "Index";
}
<script type="text/javascript">
        $(document).ready(function () {
        $("input").on("keyup", function(e)
            {
            $(this).val(
                $(this).val()
                    .replace(/\D/g, '')
                    .replace(/^(\d{2})(\d{3})?(\d{3})?(\d{4})?(\d{2})?/, "$1.$2.$3/$4-$5"));
        });

        $("#btnSend").click(function () {
            var cnpj = $("#txtCep").val();
            cnpj = cnpj.replace(".", "");
            cnpj = cnpj.replace("-", "");
            cnpj = cnpj.replace("/", "");
            cnpj = cnpj.replace(".", "");

            var url = "https://www.receitaws.com.br/v1/cnpj/" + cnpj + ""
            $.ajax({
                url: url,
                type: "GET",
                dataType: "json",
                success: function (data) {
                     $.ajax({
                            url: '@Url.Action("GetCnpj","Cnpj")',
                            type: "POST",
                            contentType: "application/json",
                            data: { Cnpj: data },
            })
                },
                error: function (error) {
                    console.log(error);
                    alert("algo deu errado")
                }
            })
        })
    })
</script>
<h2>Cnpj</h2>

<div class="row">
    <div class="col-md-2">
        @Html.TextBox("txtCep", null, new { @class = "form-control" })
    </div>
    <div class="col-md-2">
        <button class="btn btn-success" id="btnSend">Consultar</button>
    </div>
</div>
